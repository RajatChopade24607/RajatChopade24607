<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="../JS/jquery.js"></script>
    <script src="../AJAX/ajax.js"></script>
    <script src="../JSON/data.json"></script>
    <script src="../JS/index.js"></script>

    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css">
    <title>Document</title>
</head>
<style>
    table {
        width: 300px;
        font: 17px Calibri;
    }
    
    table,
    th,
    td {
        border: solid 1px #DDD;
        border-collapse: collapse;
        padding: 2px 3px;
        text-align: center;
    }
    
    table img {
        border: none;
        width: 51px;
        height: 51px;
    }
</style>
</head>

<body>
    <p><input type="button" id="btShowImage" value="Click to Show Images" /></p>
    <div id='showData'></div>
</body>
<script>
    $(document).ready(function() {
        $('#btShowImage').click(function() {
            $.getJSON("http://localhost:3000/imageUpload", function(data) {

                var arrItems = [];
                $.each(data, function(index, value) {
                    arrItems.push(value);
                });


                var col = [];
                for (var i = 0; i < arrItems.length; i++) {
                    for (var key in arrItems[i]) {
                        if (col.indexOf(key) === -1) {
                            col.push(key);
                        }
                    }
                }

                var table = document.createElement("table");

                var tr = table.insertRow(-1);

                for (var i = 0; i < col.length; i++) {
                    var th = document.createElement("th");
                    th.innerHTML = col[i];
                    tr.appendChild(th);
                }


                for (var i = 0; i < arrItems.length; i++) {
                    tr = table.insertRow(-1);

                    for (var j = 0; j < col.length; j++) {
                        var tabCell = tr.insertCell(-1);
                        if (j === 2) {


                            var img = document.createElement('img');
                            img.src = arrItems[i].imageSrc;
                            tabCell.appendChild(img);
                        } else
                            tabCell.innerHTML = arrItems[i][col[j]];
                    }
                }


                var divContainer = document.getElementById("showData");
                divContainer.innerHTML = "";
                divContainer.appendChild(table);
            });
        });
    });
</script>

</html>